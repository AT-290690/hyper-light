<head>
  <title>Hyper Light</title>
  <meta name="description" content="Run hyper light programms" />
  <link rel="icon" type="image/x-icon" href="./assets/images/favicon.svg" />
  <style>
    body {
      background: black;
    }
  </style>
</head>
<body>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/two.js/0.8.10/two.min.js"
    integrity="sha512-D9pUm3+gWPkv/Wl6vd45vRLjdkdEKGje7BxOxYG0N6m4UlEUB7RSljBwpmJNAOuf6txLLtlaRchoKfzngr/bQg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script type="module">
    import { decodeUrl } from './language/misc/compression.js'
    import { compileToJs } from './language/core/compiler.js'
    import {
      treeShake,
      languageUtilsString,
      generateCompressedModules,
    } from './language/misc/utils.js'
    import { wrapInBody, removeNoCode } from './language/misc/helpers.js'
    import { parse } from './language/core/parser.js'
    const shortModules = generateCompressedModules()
    const inlined = wrapInBody(
      removeNoCode(
        decodeUrl(
          location.href.split('preview.html')[1].trim().replace('?s=', '')
        )
      )
    )
    const { body, modules } = compileToJs(parse(inlined))
    const UNIVERSE = treeShake(modules)
    const script = document.createElement('script')
    script.innerHTML = `const canvasContainer =  document.createElement('div')
    canvasContainer.id = 'canvas-container'
    document.body.appendChild(canvasContainer)
    const VOID = null
    const LOGGER = () => () => {}
    ${languageUtilsString}
    ${UNIVERSE}
    ${body}
    `
    document.body.appendChild(script)
  </script>
</body>
